<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BenchMatch Pro ‚Äî US Staffing AI Tool</title>
<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;600;700;800&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mammoth/1.6.0/mammoth.browser.min.js"></script>
<style>
:root {
  --bg:#040d1a; --bg2:#071224; --surface:#0a1929; --card:#0d2137; --card2:#102540;
  --border:#1a3a5c; --border2:#1e4570; --blue:#1565c0; --blue2:#1976d2;
  --accent:#00b4d8; --accent2:#0077b6; --gold:#ffd60a; --green:#00e676;
  --red:#ff5252; --orange:#ffab40; --text:#e3eeff; --muted:#5a7a9a;
  --glow:rgba(0,180,216,0.2); --glow2:rgba(21,101,192,0.3);
}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg);color:var(--text);font-family:'Source Sans 3',sans-serif;min-height:100vh;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse at 0% 0%,rgba(21,101,192,.12) 0%,transparent 50%),radial-gradient(ellipse at 100% 100%,rgba(0,180,216,.08) 0%,transparent 50%);pointer-events:none;z-index:0}

/* LOCK */
#lockScreen{position:fixed;inset:0;background:linear-gradient(135deg,#020812,#040d1a,#071224);display:flex;align-items:center;justify-content:center;z-index:9999;flex-direction:column}
.lock-box{background:var(--card);border:1px solid var(--border2);border-radius:20px;padding:48px 40px;width:360px;text-align:center;box-shadow:0 0 60px rgba(0,180,216,.1),0 24px 64px rgba(0,0,0,.5);animation:lockIn .6s cubic-bezier(.34,1.56,.64,1) both}
@keyframes lockIn{from{opacity:0;transform:scale(0.85) translateY(20px)}}
.lock-icon{font-size:48px;margin-bottom:16px}
.lock-title{font-family:'Raleway',sans-serif;font-size:22px;font-weight:800;margin-bottom:6px}
.lock-sub{font-size:13px;color:var(--muted);margin-bottom:28px}
.lock-input{width:100%;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:13px 16px;color:var(--text);font-family:'Source Sans 3',sans-serif;font-size:15px;outline:none;text-align:center;letter-spacing:4px;transition:border-color .3s;margin-bottom:14px}
.lock-input:focus{border-color:var(--accent)}
.lock-btn{width:100%;padding:13px;background:linear-gradient(135deg,var(--blue),var(--accent2));border:none;border-radius:10px;color:#fff;font-family:'Raleway',sans-serif;font-size:15px;font-weight:700;cursor:pointer;transition:all .25s;box-shadow:0 4px 20px var(--glow2)}
.lock-btn:hover{transform:translateY(-2px);box-shadow:0 8px 28px var(--glow2)}
.lock-err{color:var(--red);font-size:13px;margin-top:10px;display:none}
.lock-hint{font-size:11px;color:var(--muted);margin-top:14px}

/* APP */
#app{display:none}

/* TOPBAR */
.topbar{background:rgba(7,18,36,.95);border-bottom:1px solid var(--border);backdrop-filter:blur(12px);padding:0 28px;display:flex;align-items:center;justify-content:space-between;height:64px;position:sticky;top:0;z-index:100}
.topbar-brand{display:flex;align-items:center;gap:12px}
.brand-logo{width:40px;height:40px;background:linear-gradient(135deg,var(--blue),var(--accent));border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px;box-shadow:0 0 20px var(--glow)}
.brand-name{font-family:'Raleway',sans-serif;font-size:20px;font-weight:800}
.brand-tag{font-size:11px;color:var(--accent);font-weight:600;letter-spacing:.5px;margin-top:1px}
.topbar-nav{display:flex;gap:4px}
.nav-btn{padding:8px 16px;border:none;border-radius:8px;font-family:'Source Sans 3',sans-serif;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s;background:transparent;color:var(--muted);display:flex;align-items:center;gap:6px}
.nav-btn:hover{background:rgba(255,255,255,.05);color:var(--text)}
.nav-btn.on{background:rgba(0,180,216,.12);color:var(--accent)}
.topbar-right{display:flex;align-items:center;gap:12px}
.status-dot{width:8px;height:8px;background:var(--green);border-radius:50%;box-shadow:0 0 8px var(--green);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
.logout-btn{padding:6px 14px;border:1px solid var(--border);border-radius:8px;font-size:12px;color:var(--muted);background:none;cursor:pointer;transition:all .2s}
.logout-btn:hover{border-color:var(--red);color:var(--red)}

/* PANELS */
.panel{display:none}.panel.on{display:block}
.wrap{max-width:1060px;margin:0 auto;padding:28px 20px;position:relative;z-index:1}

/* CARDS */
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:24px;margin-bottom:20px;transition:border-color .3s;animation:fadeUp .5s ease both}
.card:hover{border-color:var(--border2)}
.card-header{display:flex;align-items:center;gap:10px;margin-bottom:6px}
.card-title{font-family:'Raleway',sans-serif;font-size:16px;font-weight:700}
.card-sub{color:var(--muted);font-size:13px;margin-bottom:20px;line-height:1.5}

/* STATS */
.stats-row{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}
@media(max-width:700px){.stats-row{grid-template-columns:repeat(2,1fr)}}
.stat-card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:18px;text-align:center;transition:all .3s}
.stat-card:hover{border-color:var(--border2);transform:translateY(-2px)}
.stat-num{font-family:'Raleway',sans-serif;font-size:28px;font-weight:800;line-height:1}
.stat-label{font-size:12px;color:var(--muted);margin-top:4px}

/* UPLOAD */
.dropzone{border:2px dashed var(--border);border-radius:14px;padding:40px 20px;text-align:center;cursor:pointer;transition:all .3s;position:relative}
.dropzone:hover,.dropzone.over{border-color:var(--accent);background:rgba(0,180,216,.04)}
.dropzone input{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%}
.dz-icon{font-size:40px;margin-bottom:12px}
.dz-text{font-size:15px;font-weight:600}
.dz-hint{font-size:12px;color:var(--muted);margin-top:5px}

/* CANDIDATES */
.cand-list{display:flex;flex-direction:column;gap:8px;margin-top:16px}
.cand-item{display:flex;align-items:center;gap:12px;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:12px 16px;transition:all .25s}
.cand-item:hover{border-color:var(--border2);transform:translateX(3px)}
.cand-avatar{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,rgba(21,101,192,.3),rgba(0,180,216,.3));display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0}
.cand-info{flex:1;min-width:0}
.cand-name{font-size:14px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.cand-meta{font-size:12px;color:var(--muted);margin-top:2px}
.cand-skills{display:flex;flex-wrap:wrap;gap:4px;margin-top:6px}
.skill-tag{padding:2px 8px;border-radius:6px;font-size:11px;font-weight:600;background:rgba(0,180,216,.1);color:var(--accent);border:1px solid rgba(0,180,216,.2)}
.cand-check{width:22px;height:22px;border:2px solid var(--border);border-radius:6px;cursor:pointer;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:700;transition:all .2s}
.cand-check.on{background:var(--accent);border-color:var(--accent);color:#000}
.cand-del{background:none;border:none;color:var(--muted);cursor:pointer;font-size:16px;padding:4px;border-radius:6px;transition:all .2s}
.cand-del:hover{color:var(--red);background:rgba(255,82,82,.1)}

textarea{width:100%;background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px;color:var(--text);font-family:'Source Sans 3',sans-serif;font-size:14px;line-height:1.7;resize:vertical;min-height:180px;outline:none;transition:border-color .3s}
textarea:focus{border-color:var(--accent)}
textarea::placeholder{color:var(--muted)}

.btn{display:inline-flex;align-items:center;gap:8px;padding:12px 24px;border-radius:10px;border:none;font-family:'Raleway',sans-serif;font-size:14px;font-weight:700;cursor:pointer;transition:all .25s}
.btn-primary{background:linear-gradient(135deg,var(--blue),var(--blue2));color:#fff;box-shadow:0 4px 20px var(--glow2);width:100%;justify-content:center;margin-top:16px}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 28px var(--glow2)}
.btn-primary:disabled{opacity:.5;cursor:not-allowed;transform:none}
.btn-accent{background:linear-gradient(135deg,var(--accent2),var(--accent));color:#fff;box-shadow:0 4px 16px var(--glow);padding:8px 18px;font-size:13px}
.btn-accent:hover{transform:translateY(-2px)}
.btn-ghost{background:rgba(255,255,255,.05);color:var(--muted);border:1px solid var(--border);padding:7px 14px;font-size:12px}
.btn-ghost:hover{border-color:var(--border2);color:var(--text)}

/* RESULTS */
.result-summary{background:linear-gradient(135deg,var(--card),var(--card2));border:1px solid var(--border2);border-radius:16px;padding:20px 24px;margin-bottom:20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:16px}
.rs-title{font-family:'Raleway',sans-serif;font-size:17px;font-weight:700}
.rs-stats{display:flex;gap:20px;flex-wrap:wrap}
.rs-stat{text-align:center}
.rs-num{font-family:'Raleway',sans-serif;font-size:22px;font-weight:800;line-height:1}
.rs-label{font-size:11px;color:var(--muted);margin-top:2px}

.result-list{display:flex;flex-direction:column;gap:12px}
.result-item{background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden;transition:all .25s}
.result-item:hover{border-color:var(--border2)}
.result-header{display:flex;align-items:center;gap:14px;padding:16px 20px;cursor:pointer;flex-wrap:wrap}
.score-pill{width:58px;height:58px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-family:'Raleway',sans-serif;font-size:16px;font-weight:800;flex-shrink:0}
.sp-hot{background:rgba(0,230,118,.12);color:var(--green);border:1px solid rgba(0,230,118,.25)}
.sp-good{background:rgba(0,180,216,.12);color:var(--accent);border:1px solid rgba(0,180,216,.25)}
.sp-avg{background:rgba(255,171,64,.12);color:var(--orange);border:1px solid rgba(255,171,64,.25)}
.sp-low{background:rgba(255,82,82,.12);color:var(--red);border:1px solid rgba(255,82,82,.25)}
.result-info{flex:1;min-width:180px}
.result-name{font-size:15px;font-weight:600;margin-bottom:3px}
.result-snippet{font-size:12px;color:var(--muted)}
.result-bar-wrap{flex:1;min-width:120px}
.result-bar-bg{height:6px;background:var(--border);border-radius:99px;overflow:hidden;margin-bottom:4px}
.result-bar-fill{height:100%;border-radius:99px;transition:width 1.2s cubic-bezier(.4,0,.2,1)}
.result-body{display:none;padding:20px;border-top:1px solid var(--border)}

.kw-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-bottom:16px}
@media(max-width:600px){.kw-grid{grid-template-columns:1fr}}
.kw-box{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:14px}
.kw-title{font-size:12px;font-weight:600;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:10px}
.kw-tags{display:flex;flex-wrap:wrap;gap:5px}
.kw-match{background:rgba(0,230,118,.1);color:var(--green);border:1px solid rgba(0,230,118,.2);padding:4px 10px;border-radius:6px;font-size:12px;font-weight:500}
.kw-miss{background:rgba(255,82,82,.1);color:var(--red);border:1px solid rgba(255,82,82,.2);padding:4px 10px;border-radius:6px;font-size:12px;font-weight:500}

.ai-note{background:linear-gradient(135deg,rgba(21,101,192,.1),rgba(0,180,216,.05));border:1px solid var(--border2);border-radius:12px;padding:18px;margin-bottom:16px}
.ai-note-header{display:flex;align-items:center;gap:10px;margin-bottom:12px}
.ai-face{width:38px;height:38px;border-radius:10px;background:linear-gradient(135deg,var(--blue),var(--accent));display:flex;align-items:center;justify-content:center;font-size:16px;box-shadow:0 0 14px var(--glow)}
.ai-note-name{font-size:14px;font-weight:600}
.ai-note-role{font-size:11px;color:var(--muted)}
.ai-note-text{font-size:13px;line-height:1.75;font-style:italic;border-left:3px solid var(--accent);padding-left:14px}

.tips-list{display:flex;flex-direction:column;gap:8px;margin-bottom:16px}
.tip-item{display:flex;gap:10px;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px}
.tip-num{width:24px;height:24px;background:var(--blue);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;flex-shrink:0;color:#fff}
.tip-text{font-size:13px;line-height:1.6}
.tip-text strong{color:var(--text);font-weight:600;display:block;margin-bottom:2px}
.tip-text span{color:var(--muted)}

.email-box{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px;margin-bottom:10px}
.email-box-title{font-size:13px;font-weight:600;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:12px;display:flex;align-items:center;justify-content:space-between}
.email-content{font-size:13px;line-height:1.75;white-space:pre-wrap}
.copy-btn{background:rgba(0,180,216,.1);border:1px solid rgba(0,180,216,.25);color:var(--accent);border-radius:6px;padding:4px 12px;font-size:11px;font-weight:600;cursor:pointer;transition:all .2s}
.copy-btn:hover{background:rgba(0,180,216,.2)}

.qlinks{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
.qlink{display:inline-flex;align-items:center;gap:6px;padding:7px 14px;border-radius:8px;font-size:12px;font-weight:600;text-decoration:none;transition:all .2s;border:1px solid var(--border);background:var(--surface);color:var(--text)}
.qlink:hover{border-color:var(--accent);color:var(--accent);transform:translateY(-1px)}

.loader-wrap{text-align:center;padding:52px 20px}
.loader{display:inline-block;width:48px;height:48px;border:3px solid var(--border);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite;margin-bottom:16px}
@keyframes spin{to{transform:rotate(360deg)}}
.loader-text{color:var(--muted);font-size:14px}

.empty{text-align:center;padding:40px;color:var(--muted)}
.empty-icon{font-size:44px;margin-bottom:12px;opacity:.4}
.row{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;margin-bottom:12px}
.badge{padding:3px 10px;border-radius:99px;font-size:11px;font-weight:700}
.badge-blue{background:rgba(0,180,216,.15);color:var(--accent)}
.sel-all-btn{background:none;border:1px solid var(--border);color:var(--muted);border-radius:7px;padding:5px 12px;font-size:12px;cursor:pointer;transition:all .2s}
.sel-all-btn:hover{border-color:var(--accent);color:var(--accent)}
.status-bar{font-size:13px;padding:10px 14px;border-radius:10px;background:var(--surface);margin-top:12px}
.inp{width:100%;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:12px 16px;color:var(--text);font-size:14px;outline:none;font-family:'Source Sans 3',sans-serif;transition:border-color .3s}
.inp:focus{border-color:var(--accent)}
.cloud-badge{display:inline-flex;align-items:center;gap:6px;padding:4px 12px;border-radius:99px;font-size:12px;font-weight:600;background:rgba(0,230,118,.1);color:var(--green);border:1px solid rgba(0,230,118,.2)}
.toast{position:fixed;bottom:24px;right:24px;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:13px 18px;font-size:13px;z-index:9999;animation:toastIn .3s ease;box-shadow:0 8px 32px rgba(0,0,0,.5)}
@keyframes toastIn{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeDown{from{opacity:0;transform:translateY(-16px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>

<!-- LOCK -->
<div id="lockScreen">
  <div class="lock-box">
    <div class="lock-icon">üéØ</div>
    <div class="lock-title">BenchMatch Pro</div>
    <div class="lock-sub">US Staffing AI Tool ‚Äî Brijesh & Shailesh<br>Enter password to access</div>
    <input type="password" class="lock-input" id="pwInput" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')checkPw()">
    <button class="lock-btn" onclick="checkPw()">üöÄ Enter Tool</button>
    <div class="lock-err" id="pwErr">‚ùå Wrong password. Try again.</div>
    <div class="lock-hint">Default: <strong>bench2024</strong> ‚Äî Change in Settings</div>
  </div>
</div>

<!-- APP -->
<div id="app">
  <div class="topbar">
    <div class="topbar-brand">
      <div class="brand-logo">‚ö°</div>
      <div>
        <div class="brand-name">BenchMatch Pro</div>
        <div class="brand-tag">US STAFFING AI TOOL</div>
      </div>
    </div>
    <div class="topbar-nav">
      <button class="nav-btn on" onclick="switchTab('dashboard')" id="nav-dashboard">üìä Dashboard</button>
      <button class="nav-btn" onclick="switchTab('candidates')" id="nav-candidates">üë• Candidates</button>
      <button class="nav-btn" onclick="switchTab('match')" id="nav-match">üéØ Match JD</button>
      <button class="nav-btn" onclick="switchTab('settings')" id="nav-settings">‚öôÔ∏è Settings</button>
    </div>
    <div class="topbar-right">
      <div class="status-dot"></div>
      <span style="font-size:12px;color:var(--muted)" id="db-status">Connecting...</span>
      <button class="logout-btn" onclick="logout()">üîí Lock</button>
    </div>
  </div>

  <!-- DASHBOARD -->
  <div id="panel-dashboard" class="panel on">
    <div class="wrap">
      <div style="margin-bottom:24px;animation:fadeDown .5s ease both">
        <div style="font-family:'Raleway',sans-serif;font-size:24px;font-weight:800;margin-bottom:4px">Good day! üëã <span id="user-greeting"></span></div>
        <div style="color:var(--muted);font-size:14px;display:flex;align-items:center;gap:10px">Your bench sales command center <span class="cloud-badge">‚òÅÔ∏è Cloud Synced</span></div>
      </div>
      <div class="stats-row">
        <div class="stat-card"><div class="stat-num" style="color:var(--accent)" id="stat-candidates">0</div><div class="stat-label">Bench Candidates</div></div>
        <div class="stat-card"><div class="stat-num" style="color:var(--green)" id="stat-matches">0</div><div class="stat-label">Total Matches Run</div></div>
        <div class="stat-card"><div class="stat-num" style="color:var(--gold)" id="stat-shortlisted">0</div><div class="stat-label">Shortlisted Today</div></div>
        <div class="stat-card"><div class="stat-num" style="color:var(--orange)" id="stat-selected">0</div><div class="stat-label">Selected for Match</div></div>
      </div>
      <div class="card">
        <div class="card-header"><span style="font-size:20px">‚ö°</span><div class="card-title">Quick Workflow</div></div>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px;margin-top:4px">
          <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px;text-align:center"><div style="font-size:28px;margin-bottom:8px">1Ô∏è‚É£</div><div style="font-weight:600;font-size:14px;margin-bottom:4px">Upload Candidates</div><div style="font-size:12px;color:var(--muted)">Candidates tab ‚Üí PDF/DOCX upload ‚Üí Cloud mein save</div></div>
          <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px;text-align:center"><div style="font-size:28px;margin-bottom:8px">2Ô∏è‚É£</div><div style="font-weight:600;font-size:14px;margin-bottom:4px">Get Requirement</div><div style="font-size:12px;color:var(--muted)">Gmail se copy karo ‚Üí Match JD tab mein paste karo</div></div>
          <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px;text-align:center"><div style="font-size:28px;margin-bottom:8px">3Ô∏è‚É£</div><div style="font-weight:600;font-size:14px;margin-bottom:4px">AI Analyzes</div><div style="font-size:12px;color:var(--muted)">Click Analyze ‚Üí AI ranks candidates by match %</div></div>
          <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:16px;text-align:center"><div style="font-size:28px;margin-bottom:8px">4Ô∏è‚É£</div><div style="font-weight:600;font-size:14px;margin-bottom:4px">Submit & Apply</div><div style="font-size:12px;color:var(--muted)">Email template copy karo ‚Üí Vendor ko bhejo</div></div>
        </div>
      </div>
      <div class="card">
        <div class="card-header"><span style="font-size:20px">üîó</span><div class="card-title">Job Boards ‚Äî Quick Access</div></div>
        <div class="card-sub">Third Party / C2C filter ke saath direct links</div>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px">
          <a href="https://www.dice.com/jobs?filters.employerType=Third+Party" target="_blank" class="qlink" style="justify-content:center;padding:14px;flex-direction:column;text-align:center;gap:4px"><span style="font-size:22px">üé≤</span><strong>Dice</strong><span style="font-size:11px;color:var(--muted)">3rd Party Filter</span></a>
          <a href="https://www.indeed.com/jobs" target="_blank" class="qlink" style="justify-content:center;padding:14px;flex-direction:column;text-align:center;gap:4px"><span style="font-size:22px">üîç</span><strong>Indeed</strong><span style="font-size:11px;color:var(--muted)">All Jobs</span></a>
          <a href="https://www.techfetch.com/job/searchjobs.aspx" target="_blank" class="qlink" style="justify-content:center;padding:14px;flex-direction:column;text-align:center;gap:4px"><span style="font-size:22px">üíª</span><strong>TechFetch</strong><span style="font-size:11px;color:var(--muted)">IT Jobs</span></a>
          <a href="https://www.monster.com/jobs/search" target="_blank" class="qlink" style="justify-content:center;padding:14px;flex-direction:column;text-align:center;gap:4px"><span style="font-size:22px">üëæ</span><strong>Monster</strong><span style="font-size:11px;color:var(--muted)">All Jobs</span></a>
          <a href="https://www.ziprecruiter.com/jobs-search" target="_blank" class="qlink" style="justify-content:center;padding:14px;flex-direction:column;text-align:center;gap:4px"><span style="font-size:22px">üì¶</span><strong>ZipRecruiter</strong><span style="font-size:11px;color:var(--muted)">All Jobs</span></a>
          <a href="https://www.linkedin.com/jobs/" target="_blank" class="qlink" style="justify-content:center;padding:14px;flex-direction:column;text-align:center;gap:4px"><span style="font-size:22px">üíº</span><strong>LinkedIn</strong><span style="font-size:11px;color:var(--muted)">Manual Search</span></a>
        </div>
      </div>
    </div>
  </div>

  <!-- CANDIDATES -->
  <div id="panel-candidates" class="panel">
    <div class="wrap">
      <div class="card">
        <div class="card-header"><span style="font-size:20px">üì§</span><div class="card-title">Upload Bench Candidates</div></div>
        <div class="card-sub">PDF, DOCX, DOC, TXT ‚Äî sab formats. Cloud mein save hote hain ‚Äî kisi bhi laptop se access karo! ‚òÅÔ∏è</div>
        <div class="dropzone" id="dropzone">
          <input type="file" id="fileInput" accept=".pdf,.doc,.docx,.txt" multiple>
          <div class="dz-icon">üìÑ</div>
          <div class="dz-text">Click to upload or drag & drop resumes</div>
          <div class="dz-hint">‚úÖ PDF &nbsp;‚úÖ DOCX &nbsp;‚úÖ DOC &nbsp;‚úÖ TXT ‚Äî Multiple files OK</div>
        </div>
      </div>
      <div class="card">
        <div class="row">
          <div class="card-header" style="margin-bottom:0"><span style="font-size:20px">üë•</span><div class="card-title">Bench Candidates <span class="badge badge-blue" id="cand-count">0</span></div></div>
          <button class="sel-all-btn" onclick="selectAllCands()">Select All</button>
        </div>
        <div class="card-sub">Check karo jis candidate ko JD se match karna hai.</div>
        <div class="cand-list" id="cand-list"><div class="empty"><div class="empty-icon">üë§</div><div>No candidates yet. Upload above!</div></div></div>
      </div>
    </div>
  </div>

  <!-- MATCH JD -->
  <div id="panel-match" class="panel">
    <div class="wrap">
      <div class="card">
        <div class="card-header"><span style="font-size:20px">üìã</span><div class="card-title">Paste Job Requirement</div></div>
        <div class="card-sub">Gmail ya job board se requirement copy karo ‚Äî AI match karega sab candidates se.</div>
        <textarea id="jdInput" placeholder="Paste requirement here...&#10;&#10;Example:&#10;Hi, urgent req for Java Developer&#10;Location: Austin TX (Hybrid)&#10;Duration: 12 months C2C&#10;Rate: $65/hr&#10;Skills: Java, Spring Boot, AWS, Docker, Kubernetes&#10;Visa: Any ‚Äî Please send matching profiles ASAP"></textarea>
        <div class="status-bar" id="sel-status" style="color:#ffc107">‚ö†Ô∏è No candidates selected ‚Äî Candidates tab se select karo</div>
        <button class="btn btn-primary" id="analyzeBtn" onclick="runMatch()">ü§ñ Match with AI Hiring Manager</button>
      </div>
      <div id="results-area"></div>
    </div>
  </div>

  <!-- SETTINGS -->
  <div id="panel-settings" class="panel">
    <div class="wrap">
      <div class="card">
        <div class="card-header"><span style="font-size:20px">üîë</span><div class="card-title">Gemini API Key</div></div>
        <div class="card-sub">Ek baar daalo ‚Äî Firebase cloud mein save hogi. Dono laptops pe automatically aayegi!</div>
        <div style="display:flex;flex-direction:column;gap:10px;max-width:500px">
          <div style="position:relative">
            <input type="password" id="apiKeyInput" class="inp" placeholder="AIzaSy..." style="padding-right:70px">
            <button onclick="toggleApiVis()" style="position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--muted);cursor:pointer;font-size:12px" id="apiVisBtn">Show</button>
          </div>
          <div style="display:flex;gap:10px">
            <button class="btn btn-accent" onclick="saveApiKey()">üíæ Save Key</button>
            <button class="btn btn-ghost" onclick="testApiKey()">üß™ Test Key</button>
          </div>
          <div id="apiKeyStatus" style="font-size:13px;color:var(--muted)"></div>
        </div>
        <div style="margin-top:16px;background:rgba(0,180,216,.06);border:1px solid rgba(0,180,216,.15);border-radius:10px;padding:14px;font-size:13px;color:var(--muted);line-height:1.7">
          üîë Key leni hai? <a href="https://aistudio.google.com/api-keys" target="_blank" style="color:var(--accent)">aistudio.google.com/api-keys</a> pe jaao<br>
          ‚úÖ Key save hone ke baad dono laptops pe automatically kaam karegi!
        </div>
      </div>
      <div class="card">
        <div class="card-header"><span style="font-size:20px">üîê</span><div class="card-title">Change Password</div></div>
        <div class="card-sub">Dono ke liye same password ‚Äî jo bhi set karo woh yaad rakhna!</div>
        <div style="display:flex;flex-direction:column;gap:10px;max-width:360px">
          <input type="password" id="newPw1" class="inp" placeholder="New password">
          <input type="password" id="newPw2" class="inp" placeholder="Confirm new password">
          <button class="btn btn-accent" onclick="changePw()" style="width:fit-content">üíæ Save Password</button>
        </div>
      </div>
      <div class="card">
        <div class="card-header"><span style="font-size:20px">‚ÑπÔ∏è</span><div class="card-title">About</div></div>
        <div style="font-size:13px;color:var(--muted);line-height:1.8">
          <b style="color:var(--text)">BenchMatch Pro</b> ‚Äî Brijesh & Shailesh ke liye<br>
          ‚úÖ Firebase Cloud ‚Äî kisi bhi laptop se access<br>
          ‚úÖ Gemini AI ‚Äî 1500 free requests/day<br>
          ‚úÖ Password protected<br>
          ‚úÖ PDF, DOCX, DOC, TXT support
        </div>
      </div>
    </div>
  </div>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { getFirestore, collection, doc, setDoc, getDoc, getDocs, deleteDoc, updateDoc } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAOC-e4htzqIe4bDbUnctWmg70_Eif8S3U",
  authDomain: "benchmatch-pro.firebaseapp.com",
  projectId: "benchmatch-pro",
  storageBucket: "benchmatch-pro.firebasestorage.app",
  messagingSenderId: "829024720701",
  appId: "1:829024720701:web:9897bb062bb4cffd845754"
};

const firebaseApp = initializeApp(firebaseConfig);
const db = getFirestore(firebaseApp);
window._db = db;
window._fbReady = true;

// ‚îÄ‚îÄ FIREBASE HELPERS ‚îÄ‚îÄ
window.fbSaveCandidate = async (c) => {
  await setDoc(doc(db, 'candidates', c.id), c);
};
window.fbDeleteCandidate = async (id) => {
  await deleteDoc(doc(db, 'candidates', id));
};
window.fbLoadCandidates = async () => {
  const snap = await getDocs(collection(db, 'candidates'));
  return snap.docs.map(d => d.data());
};
window.fbSaveSetting = async (key, value) => {
  await setDoc(doc(db, 'settings', key), { value });
};
window.fbGetSetting = async (key) => {
  const d = await getDoc(doc(db, 'settings', key));
  return d.exists() ? d.data().value : null;
};

document.getElementById('db-status').textContent = '‚òÅÔ∏è Cloud Connected';
document.getElementById('db-status').style.color = '#00e676';

// Init app after Firebase ready
window.initApp();
</script>

<script>
// ‚îÄ‚îÄ PASSWORD ‚îÄ‚îÄ
const DEFAULT_PW = 'bench2024';
let candidates = [];
let stats = { matches: 0, shortlisted: 0 };

function checkPw() {
  const pw = document.getElementById('pwInput').value;
  const saved = localStorage.getItem('bmp_pw') || DEFAULT_PW;
  if(pw === saved) {
    document.getElementById('lockScreen').style.display = 'none';
    document.getElementById('app').style.display = 'block';
    if(window._fbReady) window.initApp();
  } else {
    document.getElementById('pwErr').style.display = 'block';
    document.getElementById('pwInput').value = '';
  }
}

function logout() {
  document.getElementById('app').style.display = 'none';
  document.getElementById('lockScreen').style.display = 'flex';
  document.getElementById('pwInput').value = '';
  document.getElementById('pwErr').style.display = 'none';
}

function changePw() {
  const p1 = document.getElementById('newPw1').value;
  const p2 = document.getElementById('newPw2').value;
  if(!p1) return showToast('‚ö†Ô∏è Password daalo!', '#ffc107');
  if(p1 !== p2) return showToast('‚ö†Ô∏è Password match nahi kiya!', '#ff5252');
  localStorage.setItem('bmp_pw', p1);
  document.getElementById('newPw1').value = '';
  document.getElementById('newPw2').value = '';
  showToast('‚úÖ Password changed!', '#00e676');
}

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
window.initApp = async function() {
  try {
    candidates = await window.fbLoadCandidates();
    const apiKey = await window.fbGetSetting('gemini_key');
    if(apiKey) {
      localStorage.setItem('bmp_gemini_key', apiKey);
      const el = document.getElementById('apiKeyInput');
      if(el) { el.value = apiKey; document.getElementById('apiKeyStatus').innerHTML = '‚úÖ <span style="color:#00e676">Key saved ‚Äî tool ready!</span>'; }
    }
    renderCandidates();
    updateStats();
    updateSelStatus();
  } catch(e) {
    console.log('Init error:', e);
  }
};

// ‚îÄ‚îÄ TABS ‚îÄ‚îÄ
const panels = ['dashboard','candidates','match','settings'];
function switchTab(t) {
  panels.forEach(p => {
    document.getElementById('panel-'+p).classList.toggle('on', p===t);
    document.getElementById('nav-'+p).classList.toggle('on', p===t);
  });
  if(t==='match') updateSelStatus();
}

// ‚îÄ‚îÄ FILE UPLOAD ‚îÄ‚îÄ
document.getElementById('fileInput').addEventListener('change', e => handleFiles(e.target.files));
const dz = document.getElementById('dropzone');
dz.addEventListener('dragover', e=>{e.preventDefault();dz.classList.add('over')});
dz.addEventListener('dragleave', ()=>dz.classList.remove('over'));
dz.addEventListener('drop', e=>{e.preventDefault();dz.classList.remove('over');handleFiles(e.dataTransfer.files)});

function handleFiles(files) {
  let done = 0;
  const total = files.length;
  Array.from(files).forEach(file => {
    const ext = file.name.split('.').pop().toLowerCase();
    const isDocx = ext==='docx'||ext==='doc';
    const processContent = async (content) => {
      const skills = extractSkills(content);
      const c = {
        id: Date.now()+'_'+Math.random().toString(36).slice(2,7),
        name: file.name.replace(/\.[^.]+$/,''),
        file: file.name,
        size: (file.size/1024).toFixed(1)+' KB',
        date: new Date().toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric'}),
        content: content.slice(0,4000),
        skills: skills,
        selected: true,
        type: ext
      };
      candidates.push(c);
      await window.fbSaveCandidate(c);
      if(++done===total) { renderCandidates(); updateStats(); showToast('‚úÖ '+total+' resume(s) uploaded!','#00e676'); }
    };
    if(isDocx) {
      const r = new FileReader();
      r.onload = ev => mammoth.extractRawText({arrayBuffer:ev.target.result}).then(res=>processContent(res.value||'')).catch(()=>processContent(''));
      r.readAsArrayBuffer(file);
    } else {
      const r = new FileReader();
      r.onload = ev => processContent(ev.target.result||'');
      r.readAsText(file);
    }
  });
  document.getElementById('fileInput').value='';
}

function extractSkills(text) {
  const known=['java','python','react','angular','vue','node','aws','azure','gcp','sql','javascript','typescript','spring','docker','kubernetes','c#','.net','php','ruby','go','scala','spark','hadoop','tableau','powerbi','salesforce','sap','oracle','mysql','mongodb','redis','terraform','jenkins','git','agile','scrum'];
  const found=[]; const lower=text.toLowerCase();
  known.forEach(s=>{if(lower.includes(s)&&found.length<6)found.push(s.toUpperCase())});
  return found;
}

// ‚îÄ‚îÄ RENDER ‚îÄ‚îÄ
function renderCandidates() {
  document.getElementById('cand-count').textContent = candidates.length;
  const list = document.getElementById('cand-list');
  if(!candidates.length){list.innerHTML='<div class="empty"><div class="empty-icon">üë§</div><div>No candidates yet. Upload above!</div></div>';return;}
  list.innerHTML = candidates.map((c,i)=>`
    <div class="cand-item" style="animation-delay:${i*.04}s">
      <div class="cand-check ${c.selected?'on':''}" onclick="toggleCand('${c.id}')">${c.selected?'‚úì':''}</div>
      <div class="cand-avatar">${c.type==='docx'||c.type==='doc'?'üìù':'üìÑ'}</div>
      <div class="cand-info">
        <div class="cand-name">${esc(c.name)}</div>
        <div class="cand-meta">${esc(c.file)} ¬∑ ${c.size} ¬∑ ${c.date}</div>
        ${c.skills&&c.skills.length?`<div class="cand-skills">${c.skills.map(s=>`<span class="skill-tag">${esc(s)}</span>`).join('')}</div>`:''}
      </div>
      <button class="cand-del" onclick="delCand('${c.id}')">‚úï</button>
    </div>`).join('');
}

async function toggleCand(id){
  const c=candidates.find(x=>x.id===id);
  if(c){c.selected=!c.selected;await window.fbSaveCandidate(c);renderCandidates();updateStats();}
}
function selectAllCands(){
  const all=candidates.every(c=>c.selected);
  candidates.forEach(async c=>{c.selected=!all;await window.fbSaveCandidate(c);});
  renderCandidates();updateStats();
}
async function delCand(id){
  candidates=candidates.filter(x=>x.id!==id);
  await window.fbDeleteCandidate(id);
  renderCandidates();updateStats();
  showToast('üóëÔ∏è Removed','#ff5252');
}

function updateStats(){
  const sel=candidates.filter(c=>c.selected);
  document.getElementById('stat-candidates').textContent=candidates.length;
  document.getElementById('stat-matches').textContent=stats.matches;
  document.getElementById('stat-shortlisted').textContent=stats.shortlisted;
  document.getElementById('stat-selected').textContent=sel.length;
}

function updateSelStatus(){
  const sel=candidates.filter(c=>c.selected);
  const el=document.getElementById('sel-status');
  if(!el)return;
  if(!sel.length){el.textContent='‚ö†Ô∏è No candidates selected ‚Äî Candidates tab se select karo';el.style.color='#ffc107';}
  else{el.textContent=`‚úÖ ${sel.length} candidate(s) selected ‚Äî ready for AI analysis`;el.style.color='#00e676';}
}

// ‚îÄ‚îÄ API KEY ‚îÄ‚îÄ
async function saveApiKey(){
  const key=document.getElementById('apiKeyInput').value.trim();
  if(!key)return showToast('‚ö†Ô∏è Key daalo!','#ffc107');
  if(!key.startsWith('AIza'))return showToast('‚ö†Ô∏è Sahi key nahi lagti!','#ff5252');
  localStorage.setItem('bmp_gemini_key',key);
  await window.fbSaveSetting('gemini_key',key);
  document.getElementById('apiKeyStatus').innerHTML='‚úÖ <span style="color:#00e676">Key saved ‚Äî Cloud mein bhi! Dono laptops pe kaam karegi! üéâ</span>';
  showToast('‚úÖ Key saved!','#00e676');
}

async function testApiKey(){
  const key=localStorage.getItem('bmp_gemini_key')||document.getElementById('apiKeyInput').value.trim();
  if(!key)return showToast('‚ö†Ô∏è Pehle key save karo!','#ffc107');
  document.getElementById('apiKeyStatus').innerHTML='‚è≥ Testing...';
  try{
    const res=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${key}`,{
      method:'POST',headers:{'Content-Type':'application/json'},
      body:JSON.stringify({contents:[{parts:[{text:'Say OK'}]}],generationConfig:{maxOutputTokens:5}})
    });
    const data=await res.json();
    if(res.ok){
      document.getElementById('apiKeyStatus').innerHTML='‚úÖ <span style="color:#00e676">Key working! Bilkul sahi! üéâ</span>';
      showToast('‚úÖ Key working!','#00e676');
    } else {
      document.getElementById('apiKeyStatus').innerHTML=`‚ùå <span style="color:#ff5252">${data.error?.message||'Error'}</span>`;
    }
  }catch(e){document.getElementById('apiKeyStatus').innerHTML=`‚ùå <span style="color:#ff5252">${e.message}</span>`;}
}

function toggleApiVis(){
  const inp=document.getElementById('apiKeyInput');
  const btn=document.getElementById('apiVisBtn');
  inp.type=inp.type==='password'?'text':'password';
  btn.textContent=inp.type==='password'?'Show':'Hide';
}

// ‚îÄ‚îÄ MATCH ‚îÄ‚îÄ
async function runMatch(){
  const jd=document.getElementById('jdInput').value.trim();
  const sel=candidates.filter(c=>c.selected);
  if(!jd){showToast('‚ö†Ô∏è Requirement paste karo!','#ffc107');return;}
  if(!sel.length){showToast('‚ö†Ô∏è Candidates select karo!','#ffc107');switchTab('candidates');return;}
  const apiKey=localStorage.getItem('bmp_gemini_key');
  if(!apiKey){showToast('‚ö†Ô∏è Settings mein API Key daalo!','#ffc107');switchTab('settings');return;}

  const btn=document.getElementById('analyzeBtn');
  btn.disabled=true;btn.textContent='‚è≥ AI analyzing...';
  document.getElementById('results-area').innerHTML=`<div class="loader-wrap"><div class="loader"></div><div class="loader-text" style="font-size:15px;font-weight:600;color:var(--text)">AI Hiring Manager reviewing ${sel.length} candidate(s)...</div><div class="loader-text" style="margin-top:8px">Experienced bench sales recruiter ki tarah soch raha hai ü§µ</div></div>`;

  try{
    const results=await Promise.all(sel.map(c=>analyzeOne(c,jd,apiKey)));
    results.sort((a,b)=>b.score-a.score);
    stats.matches+=results.length;
    stats.shortlisted=results.filter(r=>r.shortlist).length;
    updateStats();
    renderResults(results,jd);
  }catch(e){
    document.getElementById('results-area').innerHTML=`<div class="card" style="color:var(--red);text-align:center">‚ùå ${esc(e.message)}<br><small style="color:var(--muted)">Settings mein API key check karo.</small></div>`;
  }
  btn.disabled=false;btn.innerHTML='ü§ñ Match with AI Hiring Manager';
}

async function analyzeOne(candidate,jd,apiKey){
  const prompt=`You are an ATS system AND an experienced Bench Sales Recruiter with 15 years in US IT Staffing. You understand C2C, W2, 1099, bench candidates, third party, visa types (H1B, GC, USC, OPT, CPT, TN), rate negotiations.

JOB REQUIREMENT:
${jd.slice(0,2500)}

CANDIDATE: ${candidate.name}
RESUME:
${candidate.content||'[Skills detected: '+(candidate.skills||[]).join(', ')+']'}

Reply ONLY with valid JSON no markdown:
{"score":<0-100>,"verdict":"<Strong Match|Good Match|Partial Match|Weak Match>","shortlist":<true|false>,"submit_priority":"<Hot Submit|Submit|Maybe|Skip>","one_liner":"<honest one line>","matched_keywords":["up to 8"],"missing_keywords":["up to 6"],"recruiter_note":"<2-3 sentences as bench sales recruiter ‚Äî practical, honest, mention visa/rate/location>","ats_tips":[{"title":"tip","detail":"advice"},{"title":"tip","detail":"advice"},{"title":"tip","detail":"advice"}],"email_subject":"<vendor email subject>","email_body":"<4-5 line vendor submission email with [CANDIDATE NAME],[RATE],[VISA] placeholders>"}`;

  const res=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`,{
    method:'POST',headers:{'Content-Type':'application/json'},
    body:JSON.stringify({contents:[{parts:[{text:prompt}]}],generationConfig:{temperature:0.3,maxOutputTokens:2000}})
  });
  if(!res.ok){const e=await res.json();throw new Error(e.error?.message||'API error '+res.status);}
  const data=await res.json();
  const raw=data.candidates?.[0]?.content?.parts?.[0]?.text||'';
  // Extract JSON safely
  let cleaned = raw.replace(/```json|```/g,'').trim();
  // Find JSON object in response
  const jsonStart = cleaned.indexOf('{');
  const jsonEnd = cleaned.lastIndexOf('}');
  if(jsonStart !== -1 && jsonEnd !== -1) {
    cleaned = cleaned.slice(jsonStart, jsonEnd + 1);
  }
  // Fix unterminated strings by truncating at last complete field
  let json;
  try {
    json = JSON.parse(cleaned);
  } catch(e) {
    // Try to fix truncated JSON
    try {
      // Add missing closing brackets
      const fixed = cleaned
        .replace(/,\s*$/, '')
        .replace(/([^}\]"])\s*$/, '$1"}]}')
        + (cleaned.split('{').length > cleaned.split('}').length ? '}' : '');
      json = JSON.parse(fixed);
    } catch(e2) {
      // Return basic result if JSON completely broken
      json = {
        score: 50,
        verdict: "Partial Match",
        shortlist: false,
        submit_priority: "Maybe",
        one_liner: "AI response was cut short ‚Äî please try again",
        matched_keywords: [],
        missing_keywords: [],
        recruiter_note: "Could not fully analyze ‚Äî try again with shorter JD.",
        ats_tips: [],
        email_subject: "",
        email_body: ""
      };
    }
  }
  json.candidateName = candidate.name;
  return json;
}

function renderResults(list,jd){
  const hot=list.filter(r=>r.score>=80).length;
  const sl=list.filter(r=>r.shortlist).length;
  const kw=enc                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 
